/* empty css                       */import{c as S,_}from"./_plugin-vue_export-helper.a85d8817.js";import{e as h,r as M,E as w,u as B,f as L,D as C,d as v,t as $,o as u,c as f,b as c,i as A,g,F as y,q as F,h as P,n as k,k as z,l as I,m as O,z as V}from"./runtime-core.esm-bundler.23703bfe.js";const{componentName:H,create:R}=S("infiniteloading"),q=R({props:{loadingText:{type:String,default:"加载..."},hasNoMoreData:{type:String,default:"全部加载完成~"},isRefreshOnPull:{type:Boolean,default:!0},threshold:{type:Number,default:0},hasMore:{type:Boolean,default:!0}},emits:["loadMore","refreshOnPull"],setup(o,{emit:n}){const a=h(),r=h(),s=h(),t=M({top:0,isTouching:!1,isLoadingMore:!1,prevScrollTop:0,direction:"down",totalHeight:0}),l=h(!1);w(()=>{l.value&&(l.value=!1,s.value.addEventListener("scroll",e))}),B(()=>{l.value=!0,s.value.removeEventListener("scroll",e)}),L(()=>{s.value=i(a.value),s.value.addEventListener("scroll",e)}),C(()=>{s.value.removeEventListener("scroll",e)});const e=()=>{requestAnimationFrame(()=>{if(!b()||!o.hasMore||t.isLoadingMore)return!1;t.isLoadingMore=!0,n("loadMore",T)})},i=p=>p&&p.parentNode,d=v(()=>({height:t.top<0?0:`${t.top}px`,transition:t.isTouching?"height 0s cubic-bezier(0.25,0.1,0.25,1)":"height 0.6s cubic-bezier(0.25,0.1,0.25,1)"})),N=v(()=>({[H]:!0})),b=()=>{const{scrollHeight:p,scrollTop:m,clientHeight:D}=s.value;t.prevScrollTop<m?t.direction="down":t.direction="up";const E=p-m-D;return t.prevScrollTop=m,E<=o.threshold&&t.direction==="down"},T=()=>{t.isLoadingMore=!1};return{classes:N,scroller:a,styles:d,infiniteTop:r,...$(t)}}}),x={class:"infinite-body"},j={class:"infinite-bottom"},G={key:0,class:"bottom-content"},K={class:"title"};function U(o,n,a,r,s,t){return u(),f("view",{class:k(o.classes),ref:"scroller"},[c("view",x,[A(o.$slots,"default",{},void 0,!0)]),c("view",j,[o.isLoadingMore?(u(),f("view",G,[c("span",K,g(o.loadingText),1)])):o.hasMore?P("",!0):(u(),f(y,{key:1},[F(g(o.hasNoMoreData),1)],64))])],2)}const J=_(q,[["render",U],["__scopeId","data-v-96c099bf"]]),Q={en:{h2_title:{basic:"Basic"},loading:"Loading...",hasNoMore:"No more data"},"zh-CN":{h2_title:{basic:"基本"},loading:"加载...",hasNoMore:"全部加载完成~"}},W={props:{lang:{type:String,default:"en"}},emits:[],components:{InfiniteLoading:J},setup(o){const{lang:n}=o,a=M({defaultlist:[]}),r=h(!0),s=e=>{setTimeout(()=>{const i=a.defaultlist.length;if(i>30){r.value=!1,e();return}for(let d=i;d<i+10;d++)a.defaultlist.push(`${d}`);e()},600)},t=e=>new Promise((i,d)=>{setTimeout(()=>{e(),i("1")},2e3)});L(()=>{l()});const l=()=>{for(let e=0;e<10;e++)a.defaultlist.push(`${e}`)};return{refreshOnPull:t,...$(a),hasMore:r,loadMore:s,...Q[n]}}},X={class:"phone"},Y=c("div",{class:"phone-top"},"Infinite loading",-1),Z={class:"phone-content"},ee={class:"styleul"},te=c("div",{class:"phone-bottom"},null,-1);function oe(o,n,a,r,s,t){const l=z("InfiniteLoading");return u(),f("div",X,[Y,c("div",Z,[c("ul",ee,[I(l,{"loading-text":o.loading,"has-no-more-data":o.hasNoMore,hasMore:r.hasMore,onRefreshOnPull:n[0]||(n[0]=e=>r.refreshOnPull(e)),onLoadMore:n[1]||(n[1]=e=>r.loadMore(e))},{default:O(()=>[(u(!0),f(y,null,V(o.defaultlist,(e,i)=>(u(),f("li",{key:i,class:"styleli"},g(e),1))),128))]),_:1},8,["loading-text","has-no-more-data","hasMore"])])]),te])}const re=_(W,[["render",oe]]);export{re as default};
